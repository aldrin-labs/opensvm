# OpenSVM API Reference for LLMs

## Overview
OpenSVM is a comprehensive Solana blockchain explorer and analytics platform with AI-powered features. This document provides a complete reference of all available API endpoints and methods.

## Base URL
- Local Development: http://localhost:3000/api
- Production: https://opensvm.com/api

## Authentication
Most endpoints are public. Some endpoints require JWT authentication via Bearer token in Authorization header.

## API Health Status (Last Check: November 2, 2025)
- **Overall Success Rate:** 73.2% (71/97 endpoints working)
- **Average Response Time:** 807ms (Target: < 1000ms) âœ…
- **Cache Performance:** 50-99% improvement on cached endpoints
- **Total Endpoints:** 97 across 9 categories

### Performance by Category
- ðŸ” Search & Discovery: 100% success, 622ms avg response
- ðŸ’³ Account & Wallet: 93.8% success, 421ms avg response  
- ðŸ“Š Transactions: 100% success, 99ms avg response (FASTEST)
- â›“ï¸ Blockchain: 87.5% success, 4239ms avg response (SLOWEST)
- ðŸª™ Tokens & NFTs: 100% success, 285ms avg response
- ðŸ“ˆ Analytics: 88.9% success, 406ms avg response
- ðŸ¤– AI-Powered: 0% (rate limited in testing)
- ðŸ“¡ Real-Time: 0% (rate limited in testing)
- ðŸ‘¤ User Services: 20% success, 1871ms avg response

### Known Issues
- Rate limiting (429 errors) on AI endpoints and streaming services
- Slow endpoints: /blocks (18.9s), /slots (7.6s), /account-transactions (2.5s)
- Server errors (500) on /account-stats and /analytics/trending-validators

### Optimizations Implemented
- Redis caching with TTL strategies (5min for heavy endpoints, 30s for volatile data)
- RPC connection pooling (5 concurrent connections)
- Response compression (Brotli/Gzip for responses > 1KB)
- Response streaming for large datasets
- Retry logic with exponential backoff

## API Categories

### 1. BLOCKCHAIN CORE APIs

#### Transactions
- **GET /api/transaction/[signature]** - Get transaction details by signature
  - Params: signature (string) - Transaction signature
  - Response: Detailed transaction information with instructions, accounts, balances
  
- **POST /api/transaction/batch** - Batch fetch multiple transactions
  - Body: { signatures: string[], includeDetails?: boolean }
  - Response: Array of transaction details
  
- **GET /api/transaction/[signature]/analysis** - AI-powered transaction analysis
  - Params: signature (string)
  - Response: Detailed analysis with intent, risks, patterns
  
- **GET /api/transaction/[signature]/explain** - Natural language explanation
  - Params: signature (string), language? (string)
  - Response: Human-readable transaction explanation
  
- **GET /api/transaction/[signature]/related** - Find related transactions
  - Params: signature (string), limit? (number)
  - Response: Array of related transactions
  
- **GET /api/transaction/[signature]/failure-analysis** - Analyze failed transactions
  - Params: signature (string)
  - Response: Failure reasons and recommendations
  
- **GET /api/transaction/[signature]/metrics** - Transaction performance metrics
  - Params: signature (string)
  - Response: Compute units, fees, timing metrics

#### Blocks
- **GET /api/blocks** - List recent blocks
  - Query: limit? (number), before? (number)
  - Response: Array of block summaries
  
- **GET /api/blocks/[slot]** - Get specific block details
  - Params: slot (number)
  - Response: Block details with transactions, rewards, programs
  
- **GET /api/blocks/stats** - Block statistics and performance
  - Query: lookbackSlots? (number, 1-1000, default: 100)
  - Response: TPS, success rate, block times, volume metrics
  
- **GET /api/block** - Get block by slot number (legacy)
  - Query: slot (number)
  - Response: Block details

#### Accounts
- **GET /api/account-stats/[address]** - Comprehensive account statistics
  - Params: address (string) - Solana account address
  - Response: Balance, transaction count, token holdings, activity metrics
  
- **GET /api/account-transactions/[address]** - Account transaction history
  - Params: address (string)
  - Query: limit? (number), before? (string), type? (string), startDate? (ISO string), endDate? (ISO string)
  - Response: Paginated transaction history with date filtering
  
- **GET /api/account-transfers/[address]** - SOL and token transfers
  - Params: address (string)
  - Query: limit? (number), type? ('sol'|'spl')
  - Response: Transfer history
  
- **GET /api/account-portfolio/[address]** - Account portfolio overview
  - Params: address (string)
  - Response: SOL balance, tokens, NFTs, DeFi positions
  
- **GET /api/account-token-stats/[address]/[mint]** - Token-specific stats
  - Params: address (string), mint (string)
  - Response: Token balance, transfers, volume for specific token
  
- **GET /api/check-account-type** - Determine account type
  - Query: address (string)
  - Response: Type (wallet, program, token, etc.)

### 2. TOKEN & NFT APIs

#### Token Operations
- **GET /api/token/[address]** - Token information
  - Params: address (string) - Token mint address
  - Response: Token metadata, supply, holders
  
- **GET /api/token-metadata** - Batch token metadata lookup
  - Query: mints (comma-separated string)
  - Response: Array of token metadata
  
- **GET /api/token-stats/[account]/[mint]** - Token statistics for account
  - Params: account (string), mint (string)
  - Response: Balance, transfers, volume metrics
  
- **GET /api/check-token** - Verify token validity
  - Query: mint (string)
  - Response: Token validation status

#### NFT Collections
- **GET /api/nft-collections** - List NFT collections
  - Query: limit? (number), sort? ('volume'|'floor'|'items')
  - Response: Collection listings with stats
  
- **GET /api/nft-collections/trending** - Trending NFT collections
  - Response: Top trending collections
  
- **GET /api/nft-collections/new** - Newly listed collections
  - Response: Recent NFT collection launches
  
- **GET /api/nfts/collections** - Alternative collections endpoint
  - Response: Comprehensive collection data

### 3. ANALYTICS APIs

#### DeFi Analytics
- **GET /api/analytics/overview** - DeFi ecosystem overview
  - Response: TVL, volume, active users, trending protocols
  
- **GET /api/analytics/dex** - DEX analytics
  - Query: dex? (string), timeframe? ('1h'|'24h'|'7d')
  - Response: Volume, liquidity, top pairs
  
- **GET /api/analytics/defi-health** - DeFi health metrics
  - Response: Risk indicators, liquidations, stability metrics
  
- **GET /api/dex/[name]** - Specific DEX data
  - Params: name (string)
  - Response: DEX-specific analytics

#### Validator Analytics
- **GET /api/analytics/validators** - Validator network overview
  - Response: Active validators, stake distribution, performance
  
- **GET /api/analytics/trending-validators** - Trending validators
  - Response: Top performing validators
  
- **GET /api/validator/[address]** - Specific validator info
  - Params: address (string)
  - Response: Validator details, performance, delegators

#### Market Analytics
- **GET /api/analytics/marketplaces** - NFT marketplace analytics
  - Response: Volume, listings, sales data
  
- **GET /api/analytics/aggregators** - DeFi aggregator metrics
  - Response: Aggregator volumes, routes, efficiency
  
- **GET /api/analytics/launchpads** - Token launchpad analytics
  - Response: Recent launches, success rates, volumes
  
- **GET /api/analytics/bots** - Trading bot activity
  - Response: Bot volume, strategies, impact metrics

#### Social & GameFi
- **GET /api/analytics/socialfi** - SocialFi metrics
  - Response: User activity, engagement, rewards
  
- **GET /api/analytics/infofi** - Information finance metrics
  - Response: Data monetization, oracle activity
  
- **GET /api/analytics/defai** - AI-powered DeFi analytics
  - Response: AI model performance, predictions

### 4. AI-POWERED APIs

#### Question Answering
- **POST /api/getAnswer** - AI-powered question answering
  - Body: { question: string, context?: any }
  - Response: { answer: string, sources: string[], confidence: number }
  
- **POST /api/getSimilarQuestions** - Find similar questions
  - Body: { question: string, limit?: number }
  - Response: Array of similar questions with answers
  
- **GET /api/getSources** - Get data sources
  - Response: Available data sources and APIs

#### Transaction Analysis
- **POST /api/analyze-transaction** - Deep transaction analysis
  - Body: { signature: string, options?: any }
  - Response: Comprehensive analysis with ML insights
  
- **POST /api/analyze** - General blockchain data analysis
  - Body: { data: any, type: string }
  - Response: Analysis results
  
- **POST /api/filter-transactions** - Filter transactions by criteria
  - Body: { filters: any, limit?: number }
  - Response: Filtered transaction list

#### AI Context
- **POST /api/ai-response** - Generate AI responses
  - Body: { prompt: string, context?: any }
  - Response: AI-generated response
  
- **GET /api/ai-context** - Get AI conversation context
  - Response: Current context and session data

### 5. SEARCH & DISCOVERY

#### Universal Search
- **GET /api/search** - Universal search across all data
  - Query: q (string), type? (string), filters? (object)
  - Response: Search results across accounts, transactions, tokens
  
- **GET /api/search/accounts** - Account-specific search
  - Query: q (string), tokenMint? (string), minBalance? (number)
  - Response: Matching accounts
  
- **GET /api/search/filtered** - Advanced filtered search
  - Query: Complex filter parameters
  - Response: Filtered results
  
- **GET /api/search/suggestions** - Search suggestions
  - Query: q (string)
  - Response: Autocomplete suggestions
  
- **GET /api/search-suggestions** - Alternative suggestions endpoint
  - Query: q (string)
  - Response: Search suggestions

#### Program Discovery
- **GET /api/program-discovery** - Discover Solana programs
  - Query: category? (string), verified? (boolean)
  - Response: Program listings with metadata
  
- **GET /api/program-registry** - Program registry
  - Query: category? (string)
  - Response: Registered programs
  
- **GET /api/program/[address]** - Program details
  - Params: address (string)
  - Response: Program info, IDL, usage stats
  
- **GET /api/program-metadata** - Batch program metadata
  - Query: programs (comma-separated)
  - Response: Array of program metadata
  
- **GET /api/program-accounts** - Program account data
  - Query: programId (string)
  - Response: Associated accounts

### 6. USER SERVICES

#### User Profile
- **GET /api/user-profile/[walletAddress]** - Get user profile
  - Params: walletAddress (string)
  - Response: Profile data, preferences, stats
  
- **PUT /api/user-profile/[walletAddress]** - Update profile
  - Params: walletAddress (string)
  - Body: Profile update data
  
- **POST /api/user-profile/sync** - Sync profile data
  - Body: { walletAddress: string }
  - Response: Sync status

#### User History
- **GET /api/user-history/[walletAddress]** - Transaction history
  - Params: walletAddress (string)
  - Query: limit? (number), offset? (number)
  - Response: User's transaction history
  
- **POST /api/user-history/sync** - Sync history
  - Body: { walletAddress: string }
  - Response: Sync status
  
- **POST /api/user-history/repair** - Repair history data
  - Body: { walletAddress: string }
  - Response: Repair status

#### Social Features
- **POST /api/user-social/follow** - Follow user
  - Body: { follower: string, following: string }
  
- **POST /api/user-social/unfollow** - Unfollow user
  - Body: { follower: string, following: string }
  
- **POST /api/user-social/like** - Like content
  - Body: { user: string, contentId: string }
  
- **POST /api/user-social/unlike** - Unlike content
  - Body: { user: string, contentId: string }
  
- **POST /api/user-social/view** - Track content view
  - Body: { user: string, contentId: string }

#### User Preferences
- **GET /api/user-tab-preference/[walletAddress]** - Get tab preferences
  - Params: walletAddress (string)
  - Response: User's UI preferences
  
- **PUT /api/user-tab-preference/[walletAddress]** - Update preferences
  - Params: walletAddress (string)
  - Body: Preference data

### 7. REAL-TIME & STREAMING

#### Server-Sent Events (SSE)
- **GET /api/sse-feed** - Real-time transaction feed
  - Query: filter? (object)
  - Response: SSE stream of transactions
  
- **GET /api/sse-events/feed** - Event feed
  - Query: types? (array)
  - Response: SSE stream of blockchain events
  
- **GET /api/sse-alerts** - Real-time alerts
  - Query: walletAddress? (string)
  - Response: SSE stream of alerts

#### Streaming Data
- **GET /api/stream** - General data stream
  - Query: type (string), filters? (object)
  - Response: Streaming data
  
- **POST /api/stream** - Create stream subscription
  - Body: { type: string, filters: object }
  - Response: Stream ID

### 8. MONITORING & HEALTH

#### System Health
- **GET /api/health/anthropic** - Anthropic API health
  - Response: API status and latency
  
- **GET /api/monitoring/api** - API monitoring metrics
  - Response: Request counts, latencies, errors
  
- **GET /api/monitoring/requests** - Request logs
  - Query: limit? (number), status? (number)
  - Response: Recent API requests

#### Error Tracking
- **POST /api/error-tracking** - Report errors
  - Body: { error: string, context: object }
  - Response: Error ID
  
- **GET /api/error-tracking** - Get error logs
  - Query: limit? (number), severity? (string)
  - Response: Error listings
  
- **POST /api/crash-reporting** - Report crashes
  - Body: { crash: object, device: object }
  - Response: Crash ID

### 9. MONETIZATION & TOKEN GATING

#### Token Gating
- **GET /api/token-gating/check** - Check access
  - Query: walletAddress (string), requirement (object)
  - Response: Access status
  
#### Monetization
- **GET /api/monetization/balance** - Get balance
  - Headers: Authorization (Bearer token)
  - Response: User balance
  
- **POST /api/monetization/consume** - Consume credits
  - Body: { amount: number, operation: string }
  - Response: New balance
  
- **POST /api/monetization/earn** - Earn credits
  - Body: { action: string, metadata: object }
  - Response: Earned amount

### 10. MARKET DATA & DEX AGGREGATOR APIs

#### Market Data API
- **GET /api/market-data** - Token market data with DEX aggregation
  - Query Parameters:
    - `mint` (required): Token mint address
    - `endpoint` (required): 'ohlcv', 'markets', or 'orderbook'
    - `type` (optional, for ohlcv): '1m', '3m', '5m', '15m', '30m', '1H', '2H', '4H', '6H', '8H', '12H', '1D', '3D', '1W', '1M' (default: '1H')
    - `poolAddress` (optional, for ohlcv): Specific pool address for pool-specific data
    - `baseMint` (optional, for markets): Filter pools by base token
    - `offset` (optional, for orderbook): Price offset (default: '100')
  
  - **OHLCV Endpoint** (`endpoint=ohlcv`):
    - Returns candlestick/OHLC data for charting
    - Includes technical indicators: MA7, MA25, MACD (line, signal, histogram)
    - Aggregates all available DEX pools/pairs with 24h volume and transaction counts
    - Response includes:
      - `tokenInfo`: Symbol, name, price, liquidity, volume24h
      - `mainPair`: Primary trading pair (highest volume)
      - `pools[]`: All pools with pair info, DEX name, volume, price, last seen
      - `data`: OHLCV candlestick data
      - `indicators`: MA7, MA25, MACD indicators
    - Example: `/api/market-data?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&endpoint=ohlcv&type=1H`
    - Pool-specific: `/api/market-data?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&endpoint=ohlcv&poolAddress=POOL_ADDRESS`
  
  - **Markets Endpoint** (`endpoint=markets`):
    - Returns top 3 pools by liquidity
    - Includes DEX, pair, price, liquidity, volume24h, transaction count
    - Can filter by baseMint or specific poolAddress
    - Response includes:
      - `pools[]`: Array of pool data with liquidity rankings
      - `count`: Number of pools returned
      - `filters`: Applied filters
    - Example: `/api/market-data?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&endpoint=markets`
  
  - **Orderbook Endpoint** (`endpoint=orderbook`):
    - Returns market depth and order book data
    - Includes bids, asks, price levels
    - Example: `/api/market-data?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&endpoint=orderbook&offset=100`
  
  - **Security**: All responses exclude internal data sources - no API URLs or keys exposed
  - **Performance**: 24h data lookback, aggregates 100 recent transactions for pool stats

#### DEX Profile API
- **GET /api/dex/[name]** - Comprehensive DEX analytics
  - Params: name (string) - DEX identifier (raydium, orca, phoenix, meteora, etc.)
  - Response:
    - Profile: name, description, logo, website, social links, program ID
    - Metrics: volume24h, volumeChange, TVL, market share, active users, transactions
    - Historical data: volume, TVL, user activity over time
    - Top pools: Highest volume trading pairs
    - Recent trades: Latest DEX activity
    - Security: Audit status, multisig, timelock, bug bounty
    - Performance: Uptime, avg slippage, pool count, token count, liquidity depth
  - Example: `/api/dex/raydium`, `/api/dex/orca`

#### Chart & Trades Endpoints (Simplified Aliases)

##### GET /api/chart
Clean alias for OHLCV candlestick data - simplified alternative to `/api/market-data?endpoint=ohlcv`

**Request Parameters:**
- `mint` (required, string): Token mint address
- `type` (optional, string): Time interval for candles
  - Options: '1m', '3m', '5m', '15m', '30m', '1H' (default), '2H', '4H', '6H', '8H', '12H', '1D', '3D', '1W', '1M'
- `time_from` (optional, number): Start timestamp in unix seconds
- `time_to` (optional, number): End timestamp in unix seconds
- `poolAddress` (optional, string): Specific pool address for pool-specific data

**Request Schema:**
```typescript
interface ChartRequest {
  mint: string;                    // e.g., "pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS"
  type?: '1m' | '3m' | '5m' | '15m' | '30m' | '1H' | '2H' | '4H' | '6H' | '8H' | '12H' | '1D' | '3D' | '1W' | '1M';
  time_from?: number;              // Unix timestamp (seconds)
  time_to?: number;                // Unix timestamp (seconds)
  poolAddress?: string;            // Optional pool filter
}
```

**Response Schema (200 OK):**
```typescript
interface ChartResponse {
  success: true;
  data: {
    items: Array<{
      unixTime: number;            // Timestamp in seconds
      type: string;                // Interval type
      open: number;                // Opening price
      high: number;                // Highest price
      low: number;                 // Lowest price
      close: number;               // Closing price
      volume: number;              // Trading volume in USD
    }>;
    indicators?: {
      ma7?: number[];              // 7-period moving average
      ma25?: number[];             // 25-period moving average
      macd?: {
        line: number[];            // MACD line
        signal: number[];          // Signal line
        histogram: number[];       // MACD histogram
      };
    };
  };
  metadata?: {
    batchCount?: number;           // Number of API batches used
    totalCandles?: number;         // Total candles fetched
    cacheHit?: boolean;           // Whether cached data was used
    fetchTime?: number;           // API fetch duration (ms)
  };
}
```

**Error Response (4xx/5xx):**
```typescript
interface ErrorResponse {
  success: false;
  error: string;                   // Error message
  details?: any;                   // Additional error details
}
```

**Features:**
- Automatic batch fetching for large time ranges (up to 10 days of 1m data)
- Smart batching (~960 candles per batch)
- Technical indicators included (MA7, MA25, MACD)
- Performance metadata in response
- 2-minute cache TTL

**Example Requests:**
```bash
# Get 1-hour candles
GET /api/chart?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&type=1H

# Get 5-minute candles for specific time range
GET /api/chart?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&type=5m&time_from=1699920000&time_to=1699930000

# Get pool-specific data
GET /api/chart?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&poolAddress=POOL_ADDRESS&type=1H
```

---

##### GET /api/trades
Recent trades/swaps for any token

**Request Parameters:**
- `mint` (required, string): Token mint address
- `limit` (optional, number): Number of trades to return (default: 50, max: 100)
- `type` (optional, string): Transaction type filter
  - Options: 'swap' (default), 'add', 'remove'
- `offset` (optional, number): Pagination offset (default: 0)

**Request Schema:**
```typescript
interface TradesRequest {
  mint: string;                    // e.g., "pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS"
  limit?: number;                  // 1-100, default: 50
  type?: 'swap' | 'add' | 'remove'; // Transaction type
  offset?: number;                 // Pagination offset
}
```

**Response Schema (200 OK):**
```typescript
interface TradesResponse {
  success: true;
  data: Array<{
    signature: string;             // Transaction signature
    blockTime: number;             // Block timestamp
    source: string;                // DEX name (Raydium, Orca, etc.)
    owner: string;                 // Wallet address performing trade
    side: 'buy' | 'sell';          // Trade direction
    from: {
      amount: number;              // Input token amount
      mint: string;                // Input token mint
      symbol?: string;             // Input token symbol
      decimals: number;            // Token decimals
    };
    to: {
      amount: number;              // Output token amount
      mint: string;                // Output token mint
      symbol?: string;             // Output token symbol
      decimals: number;            // Token decimals
    };
    price?: number;                // Trade price
    volumeUSD?: number;            // Trade volume in USD
    slot?: number;                 // Blockchain slot number
  }>;
  pagination?: {
    offset: number;                // Current offset
    limit: number;                 // Items per page
    hasMore: boolean;              // More results available
  };
}
```

**Error Response (4xx/5xx):**
```typescript
interface ErrorResponse {
  success: false;
  error: string;                   // Error message
  details?: any;                   // Additional error details
}
```

**Features:**
- Real-time trading activity tracking
- DEX identification (Raydium, Orca, Phoenix, Meteora, Jupiter, etc.)
- Trade side detection (buy/sell)
- USD value calculations when available
- Pagination support for large result sets
- 30-second cache TTL

**Example Requests:**
```bash
# Get latest 50 swaps
GET /api/trades?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS

# Get latest 100 swaps
GET /api/trades?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&limit=100

# Get liquidity additions only
GET /api/trades?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&type=add&limit=50

# Paginate through results
GET /api/trades?mint=pvv4fu1RvQBkKXozyH5A843sp1mt6gTy9rPoZrBBAGS&limit=50&offset=50
```

#### Trading Terminal (Legacy)
- **GET /api/trading/market-data** - Real-time market data
  - Query: symbols (array), interval? (string)
  - Response: Price, volume, orderbook data

#### Position Management
- **GET /api/trading/positions** - Get positions
  - Headers: Authorization (Bearer token)
  - Response: Open positions
  
- **POST /api/trading/positions** - Open position
  - Body: { symbol: string, side: string, size: number }
  - Response: Position details
  
- **PATCH /api/trading/positions** - Modify position
  - Body: { positionId: string, updates: object }
  - Response: Updated position
  
- **DELETE /api/trading/positions** - Close position
  - Query: positionId (string)
  - Response: Closure details

#### Trade Execution
- **POST /api/trading/execute** - Execute trade
  - Body: { order: object }
  - Response: Execution details
  
- **GET /api/trading/execute** - Get execution status
  - Query: orderId (string)
  - Response: Order status

### 11. PROXY & RPC

#### Solana RPC Proxy
- **POST /api/solana-rpc** - Direct RPC calls
  - Body: Standard Solana RPC request
  - Response: RPC response
  
- **POST /api/solana-proxy** - Proxied RPC calls
  - Body: RPC request with caching
  - Response: Cached or fresh RPC response
  
- **GET /api/solana-proxy/[transaction]** - Get transaction via proxy
  - Params: transaction (string)
  - Response: Transaction details

#### OpenRouter Proxy
- **POST /api/proxy/rpc** - OpenRouter RPC
  - Body: RPC request
  - Response: RPC response
  
- **POST /api/proxy/rpc/[id]** - Specific RPC endpoint
  - Params: id (string)
  - Body: RPC parameters
  - Response: RPC result

### 12. EXTERNAL API INTEGRATIONS

#### Birdeye API (Primary Market Data Source)
Available through AI plan execution in /api/getAnswer (requires BIRDEYE_API_KEY):

- **tokenMarketData(mint)** - Comprehensive token market data with 5-tier fallback
  - Uses: Birdeye â†’ DexScreener â†’ GeckoTerminal â†’ RPC
  - Returns: Price, market cap, 24h volume, liquidity, holder count, supply
  - Example: tokenMarketData("DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263")

- **birdeyeOHLCV(address, type?, time_from?, time_to?)** - Candlestick/chart data
  - Types: 1m, 3m, 5m, 15m, 30m, 1H, 2H, 4H, 6H, 8H, 12H, 1D, 3D, 1W, 1M
  - Returns: OHLCV data with volume in USD
  - Use for: Charts, technical analysis, price history
  - Example: birdeyeOHLCV("DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263", "1H")

- **birdeyeOrderbook(address, offset?)** - Market depth and order book
  - Requires: DEX market/pair address (not token mint)
  - Returns: Bids, asks, price levels, update timestamp
  - Note: Limited to tokens with centralized orderbook markets

#### Blockchain Data API (Wallets, NFTs, Swaps)
Available through AI plan execution in /api/getAnswer:

- **getTokenHolders(address)** - Top token holders and distribution
- **getPortfolio(address, includeNftMetadata?)** - Full wallet portfolio (SOL + tokens + NFTs)
- **getTokenBalances(address)** - SPL token balances for wallet
- **getNativeBalance(address)** - SOL balance
- **getNFTsForAddress(address, params)** - NFTs owned by address
- **getNFTMetadata(address)** - NFT metadata
- **getNFTCollectionStats(address)** - Collection floor, volume, owners
- **getNFTCollectionItems(address, params)** - Items in collection
- **getSwapsByWalletAddress(address, params)** - DEX swaps by wallet
- **getSwapsByTokenAddress(address, params)** - DEX swaps for token
- **getSPLTokenTransfers(address, params)** - SPL token transfer history
- **getSOLTransfers(address, params)** - SOL transfer history
- **getTransactionsByAddress(address, params)** - Transaction history
- **getTransactionBySignature(signature)** - Transaction details
- **getDomainInfo(address)** - Domain records for wallet
- **resolveDomain(domain)** - Resolve .sol domains to address
- **getComprehensiveBlockchainData(query)** - Auto-detect and fetch relevant data

#### Solana Core Methods (via lib/solana.ts)
Available through direct API calls:

- **validateSolanaAddress(address)** - Validate address format
- **getAccountInfo(address)** - Account information
- **getNetworkStats()** - Network performance stats
- **getTokenInfo(mintAddress)** - Token mint information
- **getBlockDetails(slot)** - Detailed block data
- **getRPCLatency()** - Current RPC latency
- **getTransactionDetails(signature)** - Parse transaction
- **getRecentTransactions(address, limit)** - Recent activity

### 13. UTILITY ENDPOINTS

#### Share & Referral
- **POST /api/share/generate** - Generate share link
  - Body: { content: object, type: string }
  - Response: Share code and URL
  
- **GET /api/share/[shareCode]** - Get shared content
  - Params: shareCode (string)
  - Response: Shared data
  
- **POST /api/referrals/claim** - Claim referral
  - Body: { referralCode: string, walletAddress: string }
  - Response: Claim status
  
- **GET /api/referrals/balance** - Referral balance
  - Query: walletAddress (string)
  - Response: Referral earnings

#### Authentication
- **POST /api/auth/verify** - Verify wallet signature
  - Body: { message: string, signature: string, publicKey: string }
  - Response: Verification status
  
- **POST /api/auth/session** - Create session
  - Body: { walletAddress: string }
  - Response: Session token
  
- **POST /api/auth/logout** - Logout
  - Headers: Authorization (Bearer token)
  - Response: Logout status

#### Miscellaneous
- **GET /api/slots** - Get slot information
  - Response: Current slot, epoch info
  
- **GET /api/favicon** - Get favicon
  - Response: Site favicon
  
- **GET /api/og** - Open Graph metadata
  - Response: OG tags for sharing
  
- **POST /api/wallet-path-finding** - Find wallet connections
  - Body: { from: string, to: string }
  - Response: Connection path

## Response Formats

### Success Response
```json
{
  "success": true,
  "data": { ... },
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### Error Response
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Error description",
    "details": { ... }
  },
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### Paginated Response
```json
{
  "success": true,
  "data": [ ... ],
  "pagination": {
    "total": 1000,
    "limit": 100,
    "offset": 0,
    "hasMore": true,
    "cursor": "next_page_cursor"
  }
}
```

## Rate Limiting
- Default: 100 requests per minute per IP
- Authenticated: 1000 requests per minute per user
- Headers returned: X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset

## WebSocket Support
Some endpoints support WebSocket connections for real-time data:
- /api/scan - Real-time blockchain scanning
- /api/stream - Data streaming
- /api/sse-* endpoints use Server-Sent Events

## Network Support
- Mainnet (default): mainnet-beta
- Devnet: devnet
- Testnet: testnet

Specify network via query parameter: `?network=devnet`

## Error Codes
- 400: Bad Request - Invalid parameters
- 401: Unauthorized - Missing or invalid authentication
- 403: Forbidden - Insufficient permissions
- 404: Not Found - Resource not found
- 429: Too Many Requests - Rate limit exceeded
- 500: Internal Server Error - Server error
- 503: Service Unavailable - Service temporarily unavailable

## Best Practices
1. Always include error handling for API calls
2. Implement exponential backoff for retries
3. Cache responses when appropriate
4. Use batch endpoints for multiple queries
5. Subscribe to SSE/WebSocket for real-time data
6. Include proper authentication headers when required
7. Respect rate limits to avoid throttling

## Support
For API support, documentation updates, or to report issues:
- GitHub: https://github.com/opensvm
- Discord: https://discord.gg/opensvm
- Email: api@opensvm.com
